<template>
	<view class="container">
		<view class="page">
			<image class="banner-image" src="https://tccolumbia.qualtrics.com/CP/Graphic.php?IM=IM_9GkanAKHDCuzJuS" mode="widthFix"></image>
			
			<view class="section">
				<text class="question-title">ä½ æ˜¯å¦ç»å¸¸æ„Ÿåˆ°ï¼š</text>
				
				<view class="emotions-row">
					<view class="emotion-group">
						<text class="emotion-emoji">ğŸ˜¥</text>
						<text class="emotion-text">å‹åŠ›é‡é‡</text>
					</view>
					<text class="separator">|</text>
					<view class="emotion-group">
						<text class="emotion-emoji">ğŸ˜“</text>
						<text class="emotion-text">ç´§å¼ ä¸å®‰</text>
					</view>
					<text class="separator">|</text>
					<view class="emotion-group">
						<text class="emotion-emoji">ğŸ˜–</text>
						<text class="emotion-text">çƒ¦èºéš¾è€</text>
					</view>
				</view>
				
				<text class="help-text">æˆ‘ä»¬å¯ä»¥å¸®ä½ ã€‚</text>
			</view>
			
			<view class="title-card">
				<text class="title-text">å¹³é™è®­ç»ƒè¥æ˜¯ä»€ä¹ˆï¼Ÿ</text>
			</view>
			
			<view class="description-text">
				å¹³é™è®­ç»ƒè¥ä¼šæ•™ä½ ä¸€äº›å®ç”¨çš„<text class="highlight-text">å¹³é™æŠ€å·§</text>ï¼Œå¸®åŠ©ä½ åœ¨<text class="highlight-text">ç„¦è™‘</text>ã€<text class="highlight-text">ç´§å¼ </text>æˆ–<text class="highlight-text">ç”Ÿæ°”</text>æ—¶å¹³å¤æƒ…ç»ªï¼Œæ‰¾å›å†…å¿ƒçš„<text class="highlight-text">å¹³é™ä¸èˆ’é€‚</text>ã€‚
			</view>
			
			<view class="title-card">
				<text class="title-text">å¹³é™è®­ç»ƒè¥ä¼šæ€ä¹ˆå¸®åŠ©ä½ ï¼Ÿ</text>
			</view>
			
			<view class="step-card step-card-pink">
				<view class="step-title-wrapper">
					<text class="step-title step-title-pink">ç¬¬ä¸€æ­¥ï¼šäº†è§£é—®é¢˜æ‰€åœ¨</text>
				</view>
				<view class="step-content">
					å‘Šè¯‰æˆ‘ä»¬å“ªäº›æƒ…ç»ªå’Œç»å†æ­£å›°æ‰°ç€ä½ ï¼Œéœ€è¦å¹³é™æŠ€å·§çš„å¸®åŠ©ï¼Ÿ
				</view>
			</view>
			
			<view class="step-card step-card-beige">
				<view class="step-title-wrapper">
					<text class="step-title step-title-beige">ç¬¬äºŒæ­¥ï¼šå¬å¬ä¸“å®¶å’ŒåŒé¾„äººçš„ç»éªŒ</text>
				</view>
				<view class="step-content">
					ä½ ä¼šå¬åˆ°å…¶ä»–äººå¦‚ä½•é€šè¿‡å¹³é™æŠ€å·§å¾—åˆ°å¸®åŠ©çš„çœŸå®æ•…äº‹ã€‚
				</view>
			</view>
			
			<view class="step-card step-card-blue">
				<view class="step-title-wrapper">
					<text class="step-title step-title-blue">ç¬¬ä¸‰æ­¥ï¼šå­¦ä¹ å¹³é™æŠ€å·§</text>
				</view>
				<view class="step-content">
					ä½ å°†å­¦ä¹ å¹¶ç»ƒä¹ ä½¿ç”¨è¿™äº›å¹³é™æŠ€å·§ã€‚
				</view>
			</view>
			
			<view class="step-card step-card-purple">
				<view class="step-title-wrapper">
					<text class="step-title step-title-purple">ç¬¬å››æ­¥ï¼šè®©å¹³é™æŠ€å·§èå…¥ä½ çš„ç”Ÿæ´»</text>
				</view>
				<view class="step-content">
					æˆ‘ä»¬ä¼šå¸®åŠ©ä½ åˆ¶å®šè®¡åˆ’ï¼Œè®©è¿™äº›æŠ€å·§èå…¥ä½ çš„æ—¥å¸¸ç”Ÿæ´»ä¸­ã€‚
				</view>
			</view>
			
			<view class="next-button" @click="goToSurvey">
				<text class="next-icon">â†’</text>
			</view>
		</view>
	</view>
</template>

<script>
	export default {
		data() {
			return {
				title: 'å¹³é™è®­ç»ƒè¥',
				isLoading: true
			}
		},
		onLoad() {
			this.checkLoginStatus();
			console.log('é¦–é¡µåŠ è½½ï¼ŒæŸ¥çœ‹ç™»å½•ä¿¡æ¯:', uni.getStorageSync('token'), uni.getStorageSync('userInfo'));
		},
		methods: {
			checkLoginStatus() {
				this.isLoading = true;
				
				// æ£€æŸ¥ç”¨æˆ·æ˜¯å¦å·²ç™»å½•
				const token = uni.getStorageSync('token');
				if (!token) {
					// æœªç™»å½•ï¼Œæ˜¾ç¤ºæç¤ºå¹¶è·³è½¬åˆ°ç™»å½•é¡µé¢
					uni.showToast({
						title: 'è¯·å…ˆç™»å½•',
						icon: 'none',
						duration: 1500,
						success: () => {
							setTimeout(() => {
								uni.redirectTo({
									url: '/pages/login/login',
									fail: (err) => {
										console.error('è·³è½¬ç™»å½•é¡µé¢å¤±è´¥:', err);
										uni.showToast({
											title: 'è·³è½¬å¤±è´¥ï¼Œè¯·é‡è¯•',
											icon: 'none'
										});
									}
								});
							}, 1500);
						}
					});
				} else {
					// å·²ç™»å½•
					console.log('ç”¨æˆ·å·²ç™»å½•ï¼Œtokenå­˜åœ¨');
					this.isLoading = false;
				}
			},
			goToSurvey() {
				uni.navigateTo({
					url: '../survey/survey'
				});
			}
		}
	}
</script>

<style>
	.container {
		display: flex;
		flex-direction: column;
		align-items: center;
		width: 100%;
		min-height: 100vh;
		background-color: #ffffff;
		box-sizing: border-box;
	}
	
	.page {
		display: flex;
		flex-direction: column;
		align-items: center;
		width: 100%;
		max-width: 750rpx;
		padding: 0 20rpx;
		box-sizing: border-box;
	}
	
	.banner-image {
		width: 100%;
		margin-bottom: 40rpx;
		border-radius: 20rpx;
	}
	
	.section {
		display: flex;
		flex-direction: column;
		align-items: center;
		width: 100%;
		padding: 0;
		box-sizing: border-box;
		margin-bottom: 50rpx;
	}
	
	.question-title {
		font-size: 34rpx;
		font-weight: normal;
		color: #333;
		text-align: center;
		margin-bottom: 20rpx;
	}
	
	.emotions-row {
		display: flex;
		justify-content: center;
		align-items: center;
		width: 100%;
		margin-bottom: 40rpx;
	}
	
	.emotion-group {
		display: flex;
		flex-direction: row;
		align-items: center;
	}
	
	.emotion-emoji {
		font-size: 46rpx;
		margin-right: 8rpx;
	}
	
	.emotion-text {
		font-size: 28rpx;
		color: #333;
		font-weight: normal;
	}
	
	.separator {
		margin: 0 20rpx;
		color: #cccccc;
		font-size: 40rpx;
	}
	
	.help-text {
		font-size: 32rpx;
		color: #333;
		text-align: center;
		font-weight: normal;
		margin-top: 10rpx;
	}
	
	.title-card {
		width: 100%;
		background-color: #e8f4f8;
		padding: 24rpx 0;
		display: flex;
		justify-content: center;
		align-items: center;
		margin: 40rpx 0 30rpx 0;
		border-radius: 100rpx;
	}
	
	.title-text {
		font-size: 36rpx;
		font-weight: bold;
		color: #2c4b8e;
		text-align: center;
	}
	
	.description-text {
		font-size: 32rpx;
		color: #333;
		line-height: 1.6;
		margin-bottom: 40rpx;
		padding: 0 20rpx;
		text-align: left;
	}
	
	.highlight-text {
		color: #2c70b8;
		font-weight: bold;
	}
	
	.step-card {
		width: 100%;
		padding: 30rpx;
		border-radius: 20rpx;
		margin-bottom: 30rpx;
		box-sizing: border-box;
	}
	
	.step-card-pink {
		background-color: #fcedf2;
	}
	
	.step-card-beige {
		background-color: #fcf6e9;
	}
	
	.step-card-blue {
		background-color: #ebf5fc;
	}
	
	.step-card-purple {
		background-color: #f5effa;
	}
	
	.step-title-wrapper {
		margin-bottom: 15rpx;
	}
	
	.step-title {
		font-size: 36rpx;
		font-weight: bold;
		display: block;
	}
	
	.step-title-pink {
		color: #d94967;
	}
	
	.step-title-beige {
		color: #e5a23d;
	}
	
	.step-title-blue {
		color: #2c70b8;
	}
	
	.step-title-purple {
		color: #9966cc;
	}
	
	.step-content {
		font-size: 30rpx;
		color: #333;
		line-height: 1.6;
	}
	
	.next-button {
		width: 70rpx;
		height: 70rpx;
		background-color: #e1f3ef;
		border-radius: 50%;
		display: flex;
		justify-content: center;
		align-items: center;
		margin: 20rpx 0 50rpx 0;
		align-self: flex-end;
		cursor: pointer;
	}
	
	.next-button:active {
		opacity: 0.8;
	}
	
	.next-icon {
		font-size: 36rpx;
		color: #333;
	}
	
	@media screen and (min-width: 768px) {
		.page {
			max-width: 960rpx;
		}
		
		.title-card {
			max-width: 90%;
		}
	}
</style>
