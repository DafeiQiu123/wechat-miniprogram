<template>
	<view class="container">
		<view class="page">
			<view class="survey-content">
				<view class="title-card title-card-pink">
					<text class="title-text">ç¬¬ä¸€æ­¥ï¼šäº†è§£é—®é¢˜æ‰€åœ¨</text>
				</view>
				
				<text class="content-text content-bold">ä¸åªæ˜¯ä½ æœ‰è¿™æ ·çš„æ„Ÿå—ã€‚</text>
				<text class="content-text">è¶…è¿‡30%çš„é’å°‘å¹´è¡¨ç¤ºè‡ªå·±æ„Ÿåˆ°å‹åŠ›å¤ªå¤§ã€‚</text>
				
				<text class="content-text content-bold" style="margin-top: 40rpx;">ä¸ºä»€ä¹ˆå‹åŠ›å¯¹äººçš„å½±å“å¦‚æ­¤ä¹‹å¤§ï¼Ÿ</text>
				
				<text class="content-text">å®ƒä¼šé€šè¿‡å½±å“å­¦ä¸šè¡¨ç°ã€è¿åŠ¨çŠ¶æ€ã€ä¸äº²å‹çš„å…³ç³»ç­‰å„ç§æ–¹é¢ï¼Œè®©ç”Ÿæ´»é™·å…¥å›°å¢ƒã€‚</text>
				
				<text class="content-text" style="margin-top: 80rpx;">è®©æˆ‘ä»¬å…ˆä»ä¸€ä¸ªç®€å•çš„å¹³é™æŠ€å·§å¼€å§‹ã€‚</text>
				
				<text class="content-text" style="margin-top: 40rpx;">é¦–å…ˆï¼Œæˆ‘ä»¬æƒ³çŸ¥é“ä½ æ­¤åˆ»çš„æ„Ÿå—ã€‚</text>
				
				<text class="content-text content-bold" style="margin-top: 100rpx;">è¯·ä» 1-ğŸ˜Šéå¸¸å¹³é™ åˆ° 10-ğŸ˜£éå¸¸æœ‰å‹åŠ› ä¸­é€‰æ‹©ä¸€ä¸ªæ•°å­—æ¥è¯„ä»·ä½ æ­¤åˆ»çš„æ„Ÿå—ã€‚</text>
				
				<view class="rating-container">
					<view 
						v-for="num in 10" 
						:key="num" 
						class="rating-item" 
						:class="{'rating-selected': selectedRating === num}"
						@click="selectRating(num)"
					>
						<text class="rating-text">{{ num }}</text>
					</view>
				</view>
				
				<!-- é€‰æ‹©è¯„åˆ†åæ˜¾ç¤ºçš„å†…å®¹ -->
				<view v-if="selectedRating" class="breathing-section">
					<text class="content-text">æ„Ÿè°¢ä½ åˆ†äº«è‡ªå·±çš„æ„Ÿå—ï¼ç°åœ¨ï¼Œæˆ‘ä»¬è¦ä¸€èµ·å­¦ä¹ å››ç§å¹³é™æŠ€å·§ä¸­çš„ç¬¬ä¸€ç§ã€‚</text>
					
					<view class="breathing-image-container">
						<image class="breathing-image" src="https://tccolumbia.qualtrics.com/CP/Graphic.php?IM=IM_817HfKQd80zinRA" mode="aspectFit"></image>
					</view>
					
					<!-- å¡ç‰‡å®¹å™¨ -->
					<view class="card instruction-card card-shadow">
						<!-- æ ‡é¢˜åŒºåŸŸ -->
						<view class="card-header">
							<text class="instruction-title">å¦‚ä½• <text class="text-highlight-blue">ç¼“æ…¢æ·±å‘¼å¸</text>ï¼š</text>
						</view>
						
						<!-- æ­¥éª¤åŒºåŸŸ -->
						<view class="steps-container">
							<!-- æ­¥éª¤ 1 -->
							<view class="step-item">
								<view class="step-number">
									<text>1</text>
								</view>
								<view class="step-content">
									<text class="step-text">å°†ä¸€åªæ‰‹æ”¾åœ¨è‚šå­ä¸Šï¼Œå¦‚æœä½ è§‰å¾—èˆ’æœä¹Ÿå¯ä»¥é—­ä¸Šçœ¼ç›ã€‚</text>
								</view>
							</view>
							
							<!-- æ­¥éª¤ 2 -->
							<view class="step-item">
								<view class="step-number">
									<text>2</text>
								</view>
								<view class="step-content">
									<text class="step-text">é€šè¿‡é¼»è…”ç¼“æ…¢å¸æ°”ï¼Œæ•°åˆ°äº”ã€‚è¦å¸è¿›ä¸€å¤§å£æ°”ï¼Œåƒæ˜¯å‡†å¤‡è¦å¹ç”Ÿæ—¥è›‹ç³•ä¸Šçš„èœ¡çƒ›ä¸€æ ·ã€‚ç¡®ä¿æ°”æ¯è¿›å…¥è…¹éƒ¨è€Œéèƒ¸è…”ï¼Œæ„Ÿå—è…¹éƒ¨éš†èµ·å¸¦åŠ¨æ‰‹æŒç§»åŠ¨ã€‚</text>
								</view>
							</view>
							
							<!-- æ­¥éª¤ 3 -->
							<view class="step-item">
								<view class="step-number">
									<text>3</text>
								</view>
								<view class="step-content">
									<text class="step-text">ç°åœ¨ï¼Œç¼“æ…¢åœ°å‘¼æ°”ï¼Œæ•°åˆ°å…­ã€‚æƒ³è±¡æ­£åœ¨é€ä¸ªå¹ç­æ’åˆ—çš„èœ¡çƒ›ã€‚</text>
								</view>
							</view>
						</view>
					</view>
					
					<text class="content-text breathing-text">è¿›è¡Œå››æ¬¡<text class="text-highlight-blue">ç¼“æ…¢æ·±å‘¼å¸</text>ã€‚å¯ä»¥è·Ÿéšè§†é¢‘ä¸€èµ·æ¥ï¼</text>
					
					<view class="breathing-video-container card-shadow">
						<image class="breathing-video" src="https://tccolumbia.qualtrics.com/CP/Graphic.php?IM=IM_eyOI8lGzcqTZgqy" mode="widthFix"></image>
					</view>
					
					<text class="content-text" style="margin-top: 60rpx;">ç°åœ¨ï¼Œä½ å·²ç»å°è¯•äº†<text class="text-highlight-blue">ç¼“æ…¢æ·±å‘¼å¸</text>ï¼Œæ„Ÿè§‰å¦‚ä½•ï¼Ÿ</text>
					
					<text class="content-text content-bold" style="margin-top: 40rpx;">è¯·ä» 1-ğŸ˜Šéå¸¸å¹³é™ åˆ° 10-ğŸ˜£éå¸¸æœ‰å‹åŠ› å¯¹ä½ ç°åœ¨çš„å‹åŠ›æ°´å¹³è¿›è¡Œè¯„åˆ†ã€‚</text>
					
					<view class="rating-container">
						<view 
							v-for="num in 10" 
							:key="'after-'+num" 
							class="rating-item" 
							:class="{'rating-selected': afterRating === num}"
							@click="selectAfterRating(num)"
						>
							<text class="rating-text">{{ num }}</text>
						</view>
					</view>
					
					<!-- ç»ƒä¹ åè¯„åˆ†ç»“æœåé¦ˆ -->
					<view v-if="afterRating" class="feedback-section">
						<!-- å…ˆæ˜¾ç¤ºå‹åŠ›æ°´å¹³ä¸‹é™çš„å†…å®¹ -->
						<view class="feedback-content">
							<view class="feedback-title">å¦‚æœä½ çš„å‹åŠ›æ°´å¹³ä¸‹é™äº†â€¦â€¦</view>
							<view class="feedback-text">å¤ªå¥½äº†ï¼<text class="text-bold">ç¼“æ…¢æ·±å‘¼å¸</text>å¯èƒ½æ˜¯ä½ åº”å¯¹å‹åŠ›çš„ä¸€ä¸ªæœ‰æ•ˆçš„å¹³é™æŠ€å·§ã€‚</view>
						</view>
						
						<!-- å†æ˜¾ç¤ºå‹åŠ›æ°´å¹³æ²¡æœ‰ä¸‹é™çš„å†…å®¹ -->
						<view class="feedback-content">
							<view class="feedback-title">å¦‚æœä½ çš„å‹åŠ›æ°´å¹³æ²¡æœ‰ä¸‹é™â€¦â€¦</view>
							<view class="feedback-text">è¯·æŒç»­ç»ƒä¹ ï¼å¹³é™æŠ€å·§ä¸ä¸€å®šç¬¬ä¸€æ¬¡å°±èƒ½è§æ•ˆï¼Œ<text class="text-bold">ç»ƒä¹ å¾—è¶Šå¤šï¼Œå®ƒä»¬å¯¹æˆ‘ä»¬çš„å¸®åŠ©å°±è¶Šå¤§ã€‚</text>è€Œä¸”ï¼Œæ¯ä¸ªäººå–œæ¬¢çš„å¹³é™æŠ€å·§ä¸åŒã€‚éšåï¼Œæˆ‘ä»¬ä¼šæ•™ä½ <text class="text-bold">å¦å¤–ä¸‰ç§å¯èƒ½æ›´é€‚åˆä½ çš„å¹³é™æŠ€å·§ã€‚</text></view>
						</view>
						
						<!-- ä¸ºä»€ä¹ˆæœ‰æ•ˆ -->
						<view class="feedback-content">
							<view class="reason-title">ä¸ºä»€ä¹ˆ<text class="text-bold">ç¼“æ…¢æ·±å‘¼å¸</text>æœ‰ç”¨å‘¢ï¼Ÿ</view>
							<view class="feedback-text">å®ƒèƒ½å¸®åŠ©ä½ ï¼š<text class="text-bold">å‡ç¼“å¿ƒç‡</text> | <text class="text-bold">æ”¾æ¾è‚Œè‚‰</text> | <text class="text-bold">æ”¾æ…¢å‘¼å¸</text></view>
							<view class="feedback-text">ä¸ºäº†æ›´å¥½åœ°ç†è§£<text class="text-bold">èº«ä½“ä¸Šçš„å˜åŒ–å¦‚ä½•å¸®åŠ©ä½ å¹³é™ä¸‹æ¥</text>ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹å½“ä½ æ„Ÿåˆ°å‹åŠ›æ—¶ï¼Œèº«ä½“ä¼šå‘ç”Ÿä»€ä¹ˆã€‚</view>
						</view>
					</view>
				</view>
				
				<view class="navigation">
					<view class="nav-button" @click="goBack">
						<text class="nav-icon">â†</text>
					</view>
					<view class="nav-button" @click="goNext">
						<text class="nav-icon">â†’</text>
					</view>
				</view>
			</view>
		</view>
	</view>
</template>

<script>
	export default {
		data() {
			return {
				selectedRating: null,
				afterRating: null
			}
		},
		methods: {
			selectRating(rating) {
				this.selectedRating = rating;
				console.log('é€‰ä¸­è¯„åˆ†:', rating);
			},
			selectAfterRating(rating) {
				this.afterRating = rating;
				console.log('ç»ƒä¹ åè¯„åˆ†:', rating);
			},
			goBack() {
				uni.navigateBack();
			},
			goNext() {
				if (this.selectedRating) {
					// å¦‚æœå·²é€‰æ‹©è¯„åˆ†ä¸”å·²å®Œæˆç»ƒä¹ åè¯„åˆ†
					if (this.afterRating) {
						// è·³è½¬åˆ°ä¸‹ä¸€æ­¥
						uni.navigateTo({
							url: '/pages/survey/step3'
						});
					} else {
						// æç¤ºå®Œæˆç»ƒä¹ åè¯„åˆ†
						uni.showToast({
							title: 'è¯·å®Œæˆç»ƒä¹ åè¯„åˆ†',
							icon: 'none'
						});
					}
				} else {
					// æœªé€‰æ‹©è¯„åˆ†æç¤º
					uni.showToast({
						title: 'è¯·é€‰æ‹©ä¸€ä¸ªè¯„åˆ†',
						icon: 'none'
					});
				}
			}
		}
	}
</script>

<style>
	.container {
		display: flex;
		flex-direction: column;
		align-items: center;
		width: 100%;
		min-height: 100vh;
		background-color: #ffffff;
		box-sizing: border-box;
	}
	
	.page {
		display: flex;
		flex-direction: column;
		align-items: center;
		width: 100%;
		max-width: 750rpx;
		box-sizing: border-box;
	}
	
	.survey-content {
		width: 100%;
		display: flex;
		flex-direction: column;
		margin-bottom: 20rpx;
		padding: 0 20rpx;
		box-sizing: border-box;
	}
	
	.title-card {
		width: 100%;
		padding: 24rpx 0;
		display: flex;
		justify-content: center;
		align-items: center;
		margin: 40rpx 0 100rpx 0;
		border-radius: 100rpx;
	}
	
	.title-card-pink {
		background: linear-gradient(to right, #fff0f5, #fcedf2, #fff0f5);
	}
	
	.title-text {
		font-size: 36rpx;
		font-weight: bold;
		color: #d94967;
		text-align: center;
	}
	
	.content-text {
		font-size: 32rpx;
		color: #333;
		line-height: 1.6;
		margin-bottom: 20rpx;
	}
	
	.content-bold {
		font-weight: bold;
	}
	
	.text-bold {
		font-weight: bold;
	}
	
	.result-title {
		font-size: 40rpx;
		font-weight: bold;
		line-height: 1.4;
		margin-bottom: 16rpx;
		color: #1e507b;
		display: block;
	}
	
	.title-underline {
		border-bottom: 2px solid #1e507b;
		display: inline-block;
		padding-bottom: 6rpx;
		margin-bottom: 20rpx;
	}
	
	.explain-title {
		font-size: 40rpx;
		font-weight: bold;
		line-height: 1.4;
		color: #1e507b;
	}
	
	.highlight-text {
		color: #2c70b8;
		font-weight: bold;
	}
	
	.rating-container {
		display: flex;
		justify-content: space-between;
		width: 100%;
		margin: 30rpx 0 50rpx 0;
		flex-wrap: nowrap;
	}
	
	.rating-item {
		flex: 1;
		height: 80rpx;
		max-width: calc(100% / 10 - 8rpx);
		min-width: 40rpx;
		background-color: #f2f2f2;
		border-radius: 10rpx;
		display: flex;
		justify-content: center;
		align-items: center;
		margin-right: 8rpx;
	}
	
	.rating-item:last-child {
		margin-right: 0;
	}
	
	.rating-selected {
		background-color: #2a3654;
	}
	
	.rating-selected .rating-text {
		color: #ffffff;
	}
	
	.rating-text {
		font-size: 32rpx;
		color: #333;
	}
	
	.breathing-section {
		width: 100%;
		margin-top: 30rpx;
		display: flex;
		flex-direction: column;
	}
	
	.feedback-section {
		width: 100%;
		margin-top: 60rpx;
		display: flex;
		flex-direction: column;
	}
	
	.feedback-content {
		margin-bottom: 60rpx;
		text-align: left;
	}
	
	.feedback-title {
		font-size: 40rpx;
		font-weight: bold;
		color: #1e507b;
		margin-bottom: 20rpx;
		line-height: 1.4;
		text-align: left;
	}
	
	.reason-title {
		font-size: 40rpx;
		font-weight: bold;
		color: #1e507b;
		margin-bottom: 20rpx;
		line-height: 1.4;
		text-align: left;
		border-bottom: none;
		padding-bottom: 0;
		display: block;
	}
	
	.feedback-text {
		font-size: 34rpx;
		color: #333;
		line-height: 1.6;
		margin-bottom: 20rpx;
		text-align: left;
	}
	
	.breathing-image-container {
		width: 100%;
		display: flex;
		justify-content: center;
		margin: 40rpx 0;
	}
	
	.breathing-image {
		width: 300rpx;
		height: 300rpx;
	}
	
	.card-shadow {
		box-shadow: 0 6rpx 16rpx rgba(0, 0, 0, 0.05);
	}
	
	.card {
		position: relative;
		width: 100%;
		background-color: #f0f9fa;
		border-radius: 36rpx;
		margin: 30rpx 0;
		overflow: hidden;
		padding: 30rpx;
		box-sizing: border-box;
	}
	
	.card::before {
		content: '';
		position: absolute;
		top: 0;
		left: 0;
		width: 100%;
		height: 100%;
		background-color: #f0f9fa;
		z-index: -1;
	}
	
	.card-header {
		margin-bottom: 30rpx;
	}
	
	.instruction-title {
		font-size: 36rpx;
		font-weight: normal;
		color: #333;
	}
	
	.steps-container {
		display: flex;
		flex-direction: column;
	}
	
	.step-item {
		display: flex;
		margin-bottom: 30rpx;
		align-items: flex-start;
	}
	
	.step-item:last-child {
		margin-bottom: 0;
	}
	
	.step-content {
		flex: 1;
	}
	
	.text-highlight-blue {
		color: #4c7f9e;
		font-weight: bold;
		background-color: rgba(76, 127, 158, 0.1);
		padding: 0 4rpx;
	}
	
	.step-number {
		width: 75rpx;
		height: 75rpx;
		background-color: rgba(210, 240, 240, 0.8);
		border-radius: 50%;
		display: flex;
		justify-content: center;
		align-items: center;
		margin-right: 20rpx;
		flex-shrink: 0;
	}
	
	.step-number text {
		font-size: 38rpx;
		color: #468097;
		font-weight: 500;
	}
	
	.step-text {
		font-size: 32rpx;
		color: #333;
		line-height: 1.6;
		padding-top: 12rpx;
	}
	
	.breathing-text {
		text-align: center;
		margin: 40rpx 0;
		font-weight: bold;
	}
	
	.breathing-video-container {
		width: 100%;
		background-color: #e1f3ef;
		border-radius: 36rpx;
		overflow: hidden;
		margin: 20rpx 0 40rpx 0;
		box-sizing: border-box;
	}
	
	.breathing-video {
		width: 100%;
		display: block;
	}
	
	.navigation {
		width: 100%;
		display: flex;
		justify-content: space-between;
		margin: 50rpx 0;
	}
	
	.nav-button {
		width: 70rpx;
		height: 70rpx;
		background-color: #e1f3ef;
		border-radius: 50%;
		display: flex;
		justify-content: center;
		align-items: center;
	}
	
	.nav-button:active {
		opacity: 0.8;
	}
	
	.nav-icon {
		font-size: 36rpx;
		color: #333;
	}
	
	@media screen and (min-width: 768px) {
		.page {
			max-width: 960rpx;
		}
		
		.title-card {
			max-width: 90%;
		}
	}
</style> 