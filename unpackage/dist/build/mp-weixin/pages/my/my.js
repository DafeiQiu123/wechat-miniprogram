"use strict";const e=require("../../common/vendor.js"),o=require("../../utils/auth.js"),s={data:()=>({userInfo:{},isLoggedIn:!1}),onShow(){this.getUserInfo()},methods:{getUserInfo(){const e=o.auth.getUserInfo();e?(this.userInfo=e,this.isLoggedIn=!0):(this.userInfo={},this.isLoggedIn=!1)},logout(){e.index.showModal({title:"提示",content:"确定要退出登录吗？",success:s=>{s.confirm&&o.auth.logout().then((()=>{this.userInfo={},this.isLoggedIn=!1,e.index.showToast({title:"已退出登录",icon:"success"})}))}})},navigateTo(o){e.index.navigateTo({url:o,fail:s=>{console.error("导航失败:",s),"/pages/home/home"===o&&e.index.switchTab({url:o})}})},goToLogin(){e.index.navigateTo({url:"/pages/login/login",fail:e=>{console.error("跳转登录页面失败:",e)}})}}};const n=e._export_sfc(s,[["render",function(o,s,n,t,i,r){return e.e({a:i.userInfo.avatarUrl||"/static/icon/avatar.png",b:i.isLoggedIn},i.isLoggedIn?e.e({c:e.t(i.userInfo.nickName),d:i.userInfo.userId},i.userInfo.userId?{e:e.t(i.userInfo.userId)}:{}):{},{f:e.t(i.isLoggedIn?"退出登录":"登录"),g:i.isLoggedIn?1:"",h:e.o((e=>i.isLoggedIn?r.logout():r.goToLogin()))})}]]);wx.createPage(n);
